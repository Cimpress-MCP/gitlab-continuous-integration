#To use this you will need buildcomponents.yaml in your top level ci file. 
publish:
  image: briangweber/docker-node:carbon
  stage: publish
  script:
    - grunt bundle --packageVersion=$VERSION --packageName=$CI_PROJECT_NAME
  only:
    - master
  except:
    - schedules

deploy-int:
  extends: .deploy
  stage: deploy-int
  variables:
    DEPLOYENV: int
  environment:
    name: integration  

deploy-prd:
  extends: .deploy
  stage: deploy-prd
  variables:
    DEPLOYENV: prd
  environment:
    name: production  
  when: manual  